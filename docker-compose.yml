version: '3.8'

services:
  extrarrfin:
    image: jeanmary/extrarrfin:latest
    container_name: extrarrfin
    restart: unless-stopped
    volumes:
      # Mount config directory
      - ./config:/config
      # Mount media directory (adjust path to match your setup)
      - /path/to/your/media:/media
    environment:
      # Optional: Override config with environment variables
      - SONARR_URL=${SONARR_URL:-http://sonarr:8989}
      - SONARR_API_KEY=${SONARR_API_KEY}
      - MEDIA_DIRECTORY=/media
      - SONARR_DIRECTORY=/media
      # Jellyfin configuration (optional)
      - JELLYFIN_URL=${JELLYFIN_URL:-http://jellyfin:8096}
      - JELLYFIN_API_KEY=${JELLYFIN_API_KEY}
      # Subtitle configuration (optional)
      # Comma-separated list of language codes
      - SUBTITLE_LANGUAGES=${SUBTITLE_LANGUAGES:-fr,en,fr-FR,en-US,en-GB}
      # Set to 'true' to download all available subtitles
      - DOWNLOAD_ALL_SUBTITLES=${DOWNLOAD_ALL_SUBTITLES:-false}
      # STRM file mode: create .strm files instead of downloading videos
      # Set to 'true' to enable streaming mode (saves disk space)
      - USE_STRM_FILES=${USE_STRM_FILES:-false}
    # Command to run schedule mode
    command: ["--config", "/config/config.yaml", "schedule-mode"]
    # Alternatively, run download once:
    # command: ["--config", "/config/config.yaml", "download"]
    networks:
      - media

networks:
  media:
    # If you have an existing network with Sonarr, use:
    # external: true
    # name: your_existing_network
